import{o as a,c as x,w as i,j as c,D as y,u as h,f as d,a as e,e as l,h as g,F as m,b as p,l as f,s as b,g as u,t as o}from"./app-bIbIT4Ru.js";import{_}from"./AppLayout-Dcv0nTZt.js";import"./index-DKJrmZEC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const w=e("h1",{class:"font-semibold text-xl text-gray-800 leading-tigh"}," Control de Pagos ",-1),v=e("svg",{class:"h-10 w-10 text-cyan-700",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{stroke:"none",d:"M0 0h24v24H0z"}),e("line",{x1:"9",y1:"12",x2:"15",y2:"12"}),e("line",{x1:"12",y1:"9",x2:"12",y2:"15"}),e("path",{d:"M4 6v-1a1 1 0 0 1 1 -1h1m5 0h2m5 0h1a1 1 0 0 1 1 1v1m0 5v2m0 5v1a1 1 0 0 1 -1 1h-1m-5 0h-2m-5 0h-1a1 1 0 0 1 -1 -1v-1m0 -5v-2m0 -5"})],-1),k={class:"w-[80%] mx-auto rounded-lg border border-gray-200 p-5 m-5"},M={class:"overflow-x-auto rounded-t-lg p-t-50"},S={class:"w-full flex flex-row flex-no-wrap sm:bg-white rounded-lg overflow-hidden sm:shadow-lg my-5"},j=e("thead",{class:"text-white"},[e("tr",{class:"bg-cyan-600 flex flex-col flex-no wrap sm:table-row rounded-l-lg sm:rounded-none mb-2 sm:mb-0"},[e("th",{class:"p-3 text-center"},"Fecha"),e("th",{class:"p-3 text-center"},"Paciente"),e("th",{class:"p-3 text-center"},"Monto"),e("th",{class:"p-3 text-center"},"Status"),e("th",{class:"p-3 text-center"},"Acciones")])],-1),C={class:"flex-1 sm:flex-none"},L={class:"flex flex-col flex-no wrap sm:table-row mb-2 sm:mb-0"},z={class:"text-center border-grey-light border hover:bg-gray-100 p-3"},D={class:"text-center border-grey-light border hover:bg-gray-100 p-3"},B={class:"text-center border-grey-light border hover:bg-gray-100 p-3 truncate"},P={class:"text-center border-grey-light border hover:bg-gray-100 p-3 truncate"},$={class:"text-center border-grey-light border hover:bg-gray-100 p-3 text-red-400 hover:text-red-600 hover:font-medium cursor-pointer"},V=e("svg",{class:"h-4 w-4 text-white-700",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1),F=["onClick"],q=e("svg",{class:"h-4 w-4 text-white-700",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{stroke:"none",d:"M0 0h24v24H0z"}),e("line",{x1:"4",y1:"7",x2:"20",y2:"7"}),e("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e("line",{x1:"14",y1:"11",x2:"14",y2:"17"}),e("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),e("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"})],-1),N=e("span",{class:"sr-only"},"Delete",-1),E=[q,N],A={class:"rounded-b-lg border-t border-gray-200 px-4 py-2"},H={class:"flex justify-end gap-1 text-xs font-medium"},I={key:0},O=e("span",{class:"sr-only"},"Prev Page",-1),R=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),T={key:1},G=e("span",{class:"sr-only"},"Next Page",-1),J=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1),K={id:"view-payment-modal",tabindex:"-1",class:"overflow-y-auto overflow-x-auto fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"},Q={class:"mx-auto relative p-4 w-full max-w-2xl max-h-full"},U={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},W={class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600"},X=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Informacion del pago ",-1),Y=e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),Z=e("span",{class:"sr-only"},"Close modal",-1),ee=[Y,Z],te={key:0,class:"grid grid grid-cols-4 gap-2 text-base leading-relaxed text-gray-500 dark:text-gray-400 p-5"},se=e("p",null,[e("b",null,"Fecha")],-1),oe=e("p",null,[e("b",null,"Paciente")],-1),re=e("p",null,[e("b",null,"Monto")],-1),ae=e("p",null,[e("b",null,"Status")],-1),le={key:1,class:"grid grid grid-cols-1 gap-2 text-base leading-relaxed text-gray-500 dark:text-gray-400 p-5"},ne=e("h1",null,"Lista de Servicios:",-1),de={class:"w-full flex flex-row flex-no-wrap sm:bg-white rounded-lg overflow-hidden sm:shadow-lg my-5"},ie=e("thead",null,[e("tr",{class:"bg-cyan-600 flex flex-col flex-no wrap sm:table-row rounded-l-lg sm:rounded-none mb-2 sm:mb-0"},[e("th",{class:"p-3 text-center text-white"}," Fecha "),e("th",{class:"p-3 text-center text-white"}," Tipo "),e("th",{class:"p-3 text-center text-white"}," Asignado A "),e("th",{class:"p-3 text-center text-white"}," Monto ")])],-1),ce={class:"flex-1 sm:flex-none"},he={class:"flex flex-col flex-no wrap sm:table-row mb-2 sm:mb-0"},ue={class:"text-center border-grey-light border p-3"},ge={class:"text-center border-grey-light border p-3"},me={class:"text-center border-grey-light border p-3"},pe={class:"text-center border-grey-light border p-3"},xe={key:2,class:"grid grid grid-cols-1 gap-2 text-base leading-relaxed text-gray-500 dark:text-gray-400 p-5"},ye=e("h1",null,"Resumen de pago:",-1),fe={class:"w-full flex flex-row flex-no-wrap sm:bg-white rounded-lg overflow-hidden sm:shadow-lg my-5"},be=e("thead",null,[e("tr",{class:"bg-cyan-600 flex flex-col flex-no wrap sm:table-row rounded-l-lg sm:rounded-none mb-2 sm:mb-0"},[e("th",{class:"p-3 text-center text-white"}," Metodo de pago "),e("th",{class:"p-3 text-center text-white"}," Monto "),e("th",{class:"p-3 text-center text-white"}," Referencia "),e("th",{class:"p-3 text-center text-white"}," Comprobante "),e("th",{class:"p-3 text-center text-white"}," Comprobante ")])],-1),_e={class:"flex-1 sm:flex-none"},we={class:"flex flex-col flex-no wrap sm:table-row mb-2 sm:mb-0"},ve={class:"text-center border-grey-light border p-3"},ke={class:"text-center border-grey-light border p-3"},Me={class:"text-center border-grey-light border p-3"},Se={class:"text-center border-grey-light border p-3"},je={id:"deleteModal",tabindex:"-1",class:"overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-modal md:h-full"},Ce={class:"relative p-4 w-full max-w-md h-full md:h-auto"},Le={class:"relative p-4 text-center bg-white rounded-lg shadow dark:bg-gray-800 sm:p-5"},ze=e("svg",{"aria-hidden":"true",class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),De=e("span",{class:"sr-only"},"Close modal",-1),Be=[ze,De],Pe=e("svg",{class:"text-gray-400 dark:text-gray-500 w-11 h-11 mb-3.5 mx-auto","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),$e=e("p",{class:"mb-4 text-gray-500 dark:text-gray-300"}," Â¿Estas seguro de eliminar este pago? ",-1),Ve={class:"flex justify-center items-center space-x-4"},Fe={name:"PaymentsIndex",data(){return{modalpayment:!1,deleteModal:!1,dataPayment:[],paymentview:[],position_name:"",listServicesPaid:[],paymentsList:[]}},components:{Link:c},async mounted(){},methods:{open_Detail(r){this.datax=r,this.modalDetail=!0},closeViewModal(){this.modalpayment=!1},changeFormat(r){let t=r.split("-");return t[2]+"/"+t[1]+"/"+t[0]},viewPayment(r){this.paymentview=r,y.visit("payments/servicespayment",{method:"post",data:{payment_id:r},preserveState:!0,preserveScroll:!0,onSuccess:t=>{this.listServicesPaid=t.props.jetstream.flash.serviceslistpayment,this.paymentsList=t.props.jetstream.flash.paymentDetailList},onError:t=>{console.log("erros")}}),this.modalpayment=!0},openDeleteModal(r){this.dataPayment=r,this.deleteModal=!0},closeDeleteModal(){this.deleteModal=!1},deletePayment(r){y.visit("payments/deletepayment",{method:"post",data:{payment_id:r.id,payment_amount:r.amount,services:this.listServicesPaid,payments:this.paymentsList},preserveState:!0,preserveScroll:!0,onSuccess:t=>{this.deleteModal=!1,alert(t.props.jetstream.flash.message)},onError:t=>{console.log("erros")}})}}},Ie=Object.assign(Fe,{props:{success_message:{type:String,required:!1},payments:{type:Object,required:!0},patients:{type:String,required:!1},payment_method:{type:String,required:!1},consultations:{type:String,required:!1},packages:{type:String,required:!1}},setup(r){return(t,n)=>(a(),x(_,null,{header:i(()=>[w,t.$page.props.user.roles=="supra"||t.$page.props.user.roles=="administrator"?(a(),x(h(c),{key:0,href:t.route("payments.create"),class:"w-full"},{default:i(()=>[v]),_:1},8,["href"])):d("",!0)]),default:i(()=>[e("div",k,[e("div",M,[e("table",S,[j,(a(!0),l(m,null,g(r.payments.data,s=>(a(),l("tbody",C,[e("tr",L,[e("td",z,o(t.changeFormat(s.date)),1),e("td",D,o(s.patient.fist_name)+" "+o(s.patient.last_name),1),e("td",B,o(s.amount),1),e("td",P,o(s.status),1),e("td",$,[p(h(c),{href:t.route("payments.show",s.id),class:"text-white bg-cyan-700 hover:bg-cyan-800 focus:ring-4 focus:outline-none focus:ring-cyan-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},{default:i(()=>[V]),_:2},1032,["href"]),t.$page.props.user.roles=="supra"||t.$page.props.user.roles=="administrator"?(a(),l("button",{key:0,onClick:qe=>t.openDeleteModal(s),class:"text-white bg-cyan-700 hover:bg-cyan-800 focus:ring-4 focus:outline-none focus:ring-cyan-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},E,8,F)):d("",!0)])])]))),256))])]),e("div",A,[e("ol",H,[r.payments.current_page>1?(a(),l("li",I,[p(h(c),{href:r.payments.prev_page_url,class:"inline-flex size-8 items-center justify-center rounded border border-gray-100 bg-white text-gray-900 rtl:rotate-180"},{default:i(()=>[O,R]),_:1},8,["href"])])):d("",!0),r.payments.current_page<r.payments.last_page?(a(),l("li",T,[p(h(c),{href:r.payments.next_page_url,class:"inline-flex size-8 items-center justify-center rounded border border-gray-100 bg-white text-gray-900 rtl:rotate-180"},{default:i(()=>[G,J]),_:1},8,["href"])])):d("",!0)])])]),f(e("div",K,[e("div",Q,[e("div",U,[e("div",W,[X,e("button",{type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:n[0]||(n[0]=s=>t.closeViewModal())},ee)]),t.paymentview.lenth>0?(a(),l("div",te,[e("div",null,[se,u(" "+o(t.paymentview.date),1)]),e("div",null,[oe,u(" "+o(t.paymentview.patient.fist_name)+" "+o(t.paymentview.patient.last_name),1)]),e("div",null,[re,u(" "+o(t.paymentview.amount),1)]),e("div",null,[ae,u(" "+o(t.paymentview.status),1)])])):d("",!0),t.listServicesPaid?(a(),l("div",le,[ne,e("table",de,[ie,(a(!0),l(m,null,g(t.listServicesPaid,s=>(a(),l("tbody",ce,[e("tr",he,[e("td",ue,o(s.consultation_id?s.consultation.date:s.package.date),1),e("td",ge,o(s.consultation_id?"Consulta":s.package.service_name),1),e("td",me,o(s.consultation_id?s.consultation.employee_id:"--"),1),e("td",pe,o(s.consultation_id?s.consultation.amount:s.package.amount_paid),1)])]))),256))])])):d("",!0),t.paymentsList?(a(),l("div",xe,[ye,e("table",fe,[be,(a(!0),l(m,null,g(t.paymentsList,s=>(a(),l("tbody",_e,[e("tr",we,[e("td",ve,o(s.payment_method.name)+" | "+o(s.payment_method.bank),1),e("td",ke,o(s.parcial_amount),1),e("td",Me,o(s.reference),1),e("td",Se,o(s.url_capture?s.url_capture:"S/C"),1)])]))),256))])])):d("",!0)])])],512),[[b,t.modalpayment]]),f(e("div",je,[e("div",Ce,[e("div",Le,[e("button",{type:"button",class:"text-gray-400 absolute top-2.5 right-2.5 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-toggle":"deleteModal",onClick:n[1]||(n[1]=s=>t.closeDeleteModal())},Be),Pe,$e,e("div",Ve,[e("button",{onClick:n[2]||(n[2]=s=>t.closeDeleteModal()),"data-modal-toggle":"deleteModal",type:"button",class:"py-2 px-3 text-sm font-medium text-gray-500 bg-white rounded-lg border border-gray-200 hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-primary-300 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"}," No, cancelar "),e("button",{onClick:n[3]||(n[3]=s=>t.deletePayment(t.dataPayment)),class:"py-2 px-3 text-sm font-medium text-center text-white bg-red-600 rounded-lg hover:bg-red-700 focus:ring-4 focus:outline-none focus:ring-red-300 dark:bg-red-500 dark:hover:bg-red-600 dark:focus:ring-red-900"}," Si, Eliminar Pago. ")])])])],512),[[b,t.deleteModal]])]),_:1}))}});export{Ie as default};
